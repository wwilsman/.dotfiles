# Modes
:: default  : ~/.scripts/alerter -group "skhd" -title "SKHD" -message "Disabled" -timeout 2 -actions Dismiss
:: focus  @ : [ $(~/.scripts/alerter -group "skhd" -title "SKHD" -message "Focus mode enabled" -actions Disable) = "Disable" ] && skhd -k "hyper - space"
:: swap   @ : [ $(~/.scripts/alerter -group "skhd" -title "SKHD" -message "Swap mode enabled" -actions Disable) = "Disable" ] && skhd -k "hyper - space"
:: warp   @ : [ $(~/.scripts/alerter -group "skhd" -title "SKHD" -message "Warp mode enabled" -actions Disable) = "Disable" ] && skhd -k "hyper - space"
:: warpnf @ : [ $(~/.scripts/alerter -group "skhd" -title "SKHD" -message "Warp NF mode enabled" -actions Disable) = "Disable" ] && skhd -k "hyper - space"
:: resize @ : [ $(~/.scripts/alerter -group "skhd" -title "SKHD" -message "Resize mode enabled" -actions Disable) = "Disable" ] && skhd -k "hyper - space"
:: grid2  @ : [ $(~/.scripts/alerter -group "skhd" -title "SKHD" -message "Grid mode enabled (2x2)" -actions Disable) = "Disable" ] && skhd -k "hyper - space"
:: grid3  @ : [ $(~/.scripts/alerter -group "skhd" -title "SKHD" -message "Grid mode enabled (3x3)" -actions Disable) = "Disable" ] && skhd -k "hyper - space"
:: grid4  @ : [ $(~/.scripts/alerter -group "skhd" -title "SKHD" -message "Grid mode enabled (4x4)" -actions Disable) = "Disable" ] && skhd -k "hyper - space"
:: grid5  @ : [ $(~/.scripts/alerter -group "skhd" -title "SKHD" -message "Grid mode enabled (5x5)" -actions Disable) = "Disable" ] && skhd -k "hyper - space"
:: grid6  @ : [ $(~/.scripts/alerter -group "skhd" -title "SKHD" -message "Grid mode enabled (6x6)" -actions Disable) = "Disable" ] && skhd -k "hyper - space"
:: grid8  @ : [ $(~/.scripts/alerter -group "skhd" -title "SKHD" -message "Grid mode enabled (8x8)" -actions Disable) = "Disable" ] && skhd -k "hyper - space"

# Entrypoint to all modes is focus mode
default                                                                     < hyper - space ; focus
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < hyper - space ; default
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < escape        ; default

# Switch modes
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < f         ; focus
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < s         ; swap
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < r         ; resize
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < w         ; warp
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < shift - w ; warpnf
focus, swap, warp, warpnf, resize                                           < g         ; grid8

# Common hotkeys for all modes
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < space         : yabai -m space --rotate 90
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < shift - space : yabai -m space --rotate 270
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < x             : yabai -m space --mirror x-axis
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < y             : yabai -m space --mirror y-axis
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < b             : yabai -m space --balance
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < q             : yabai -m window --close
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < z             : yabai -m window --toggle zoom-parent
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < c             : yabai -m window --toggle split
focus, swap, warp, warpnf, resize, grid2, grid3, grid4, grid5, grid6, grid8 < v             : yabai -m window --toggle float

# Global hotkeys
default < hyper - r : launchctl kickstart -k "gui/${UID}/homebrew.mxcl.yabai"

# Focus mode
focus < i            : yabai -m window --focus north
focus < j            : yabai -m window --focus west
focus < k            : yabai -m window --focus south
focus < l            : yabai -m window --focus east
focus < return       : yabai -m window --focus largest
# change the insertion point for the next new window
focus < cmd - i      : yabai -m window --insert north; skhd -k "hyper - space"
focus < cmd - j      : yabai -m window --insert west; skhd -k "hyper - space"
focus < cmd - k      : yabai -m window --insert south; skhd -k "hyper - space"
focus < cmd - l      : yabai -m window --insert east; skhd -k "hyper - space"
# float the next new window
focus < cmd - v      : yabai -m signal --add \
                         label=next_float \
                         event=window_created \
                         action="\
                           yabai -m signal --remove next_float; \
                           yabai -m window $YABAI_WINDOW_ID --toggle float \
                         "; \
                       skhd -k "hyper - space"
# reset the insertion point and cancel the next float signal
focus < cmd - return : yabai -m window --insert west; \
                       yabai -m signal --remove next_float; \
                       skhd -k "hyper - space"
# space navigation
focus < 1            : yabai -m space --focus 1
focus < 2            : yabai -m space --focus 2
focus < 3            : yabai -m space --focus 3
focus < tab          : yabai -m space --focus next
focus < shift - tab  : yabai -m space --focus prev
# change layout
focus < cmd - b      : yabai -m space --layout bsp
focus < cmd - f      : yabai -m space --layout float

# Swap mode
swap < i      : yabai -m window --swap north
swap < j      : yabai -m window --swap west
swap < k      : yabai -m window --swap south
swap < l      : yabai -m window --swap east
swap < return : yabai -m window --swap largest

# Warp modes
warp, warpnf < i           : yabai -m window --warp north
warp, warpnf < j           : yabai -m window --warp west
warp, warpnf < k           : yabai -m window --warp south
warp, warpnf < l           : yabai -m window --warp east
warp, warpnf < return      : yabai -m window --warp biggest
warp         < 1           : yabai -m window --space 1; yabai -m space --focus 1
warpnf       < 1           : yabai -m window --space 1
warp         < 2           : yabai -m window --space 2; yabai -m space --focus 2
warpnf       < 2           : yabai -m window --space 2
warp         < 3           : yabai -m window --space 3; yabai -m space --focus 3
warpnf       < 3           : yabai -m window --space 3
warp         < tab         : yabai -m window --space next; yabai -m space --focus next
warpnf       < tab         : yabai -m window --space next
warp         < shift - tab : yabai -m window --space prev; yabai -m space --focus prev
warpnf       < shift - tab : yabai -m window --space prev

# Resize mode
resize < i         : yabai -m window --resize top:0:-20
resize < shift - i : yabai -m window --resize top:0:20
resize < j         : yabai -m window --resize left:-20:0
resize < shift - j : yabai -m window --resize left:20:0
resize < k         : yabai -m window --resize bottom:0:20
resize < shift - k : yabai -m window --resize bottom:0:-20
resize < l         : yabai -m window --resize right:20:0
resize < shift - l : yabai -m window --resize right:-20:0

# Grid modes
grid2, grid3, grid4, grid5, grid6, grid8 < 2 ; grid2
grid2, grid3, grid4, grid5, grid6, grid8 < 3 ; grid3
grid2, grid3, grid4, grid5, grid6, grid8 < 4 ; grid4
grid2, grid3, grid4, grid5, grid6, grid8 < 5 ; grid5
grid2, grid3, grid4, grid5, grid6, grid8 < 6 ; grid6
grid2, grid3, grid4, grid5, grid6, grid8 < 8 ; grid8
# 2x2
grid2 < i         : ~/.scripts/yabai-grid 2:-:0:-1:0:0
grid2 < ctrl - i  : ~/.scripts/yabai-grid 2:-:0:-1:0:1
grid2 < shift - i : ~/.scripts/yabai-grid 2:-:0:1:0:-1
grid2 < j         : ~/.scripts/yabai-grid -:2:-1:0:0:0
grid2 < ctrl - j  : ~/.scripts/yabai-grid -:2:-1:0:1:0
grid2 < shift - j : ~/.scripts/yabai-grid -:2:1:0:-1:0
grid2 < k         : ~/.scripts/yabai-grid 2:-:0:1:0:0
grid2 < ctrl - k  : ~/.scripts/yabai-grid 2:-:0:0:0:1
grid2 < shift - k : ~/.scripts/yabai-grid 2:-:0:0:0:-1
grid2 < l         : ~/.scripts/yabai-grid -:2:1:0:0:0
grid2 < ctrl - l  : ~/.scripts/yabai-grid -:2:0:0:1:0
grid2 < shift - l : ~/.scripts/yabai-grid -:2:0:0:-1:0
# 3x3
grid3 < i         : ~/.scripts/yabai-grid 3:-:0:-1:0:0
grid3 < ctrl - i  : ~/.scripts/yabai-grid 3:-:0:-1:0:1
grid3 < shift - i : ~/.scripts/yabai-grid 3:-:0:1:0:-1
grid3 < j         : ~/.scripts/yabai-grid -:3:-1:0:0:0
grid3 < ctrl - j  : ~/.scripts/yabai-grid -:3:-1:0:1:0
grid3 < shift - j : ~/.scripts/yabai-grid -:3:1:0:-1:0
grid3 < k         : ~/.scripts/yabai-grid 3:-:0:1:0:0
grid3 < ctrl - k  : ~/.scripts/yabai-grid 3:-:0:0:0:1
grid3 < shift - k : ~/.scripts/yabai-grid 3:-:0:0:0:-1
grid3 < l         : ~/.scripts/yabai-grid -:3:1:0:0:0
grid3 < ctrl - l  : ~/.scripts/yabai-grid -:3:0:0:1:0
grid3 < shift - l : ~/.scripts/yabai-grid -:3:0:0:-1:0
# 4x4
grid4 < i         : ~/.scripts/yabai-grid 4:-:0:-1:0:0
grid4 < ctrl - i  : ~/.scripts/yabai-grid 4:-:0:-1:0:1
grid4 < shift - i : ~/.scripts/yabai-grid 4:-:0:1:0:-1
grid4 < j         : ~/.scripts/yabai-grid -:4:-1:0:0:0
grid4 < ctrl - j  : ~/.scripts/yabai-grid -:4:-1:0:1:0
grid4 < shift - j : ~/.scripts/yabai-grid -:4:1:0:-1:0
grid4 < k         : ~/.scripts/yabai-grid 4:-:0:1:0:0
grid4 < ctrl - k  : ~/.scripts/yabai-grid 4:-:0:0:0:1
grid4 < shift - k : ~/.scripts/yabai-grid 4:-:0:0:0:-1
grid4 < l         : ~/.scripts/yabai-grid -:4:1:0:0:0
grid4 < ctrl - l  : ~/.scripts/yabai-grid -:4:0:0:1:0
grid4 < shift - l : ~/.scripts/yabai-grid -:4:0:0:-1:0
# 5x5
grid5 < i         : ~/.scripts/yabai-grid 5:-:0:-1:0:0
grid5 < ctrl - i  : ~/.scripts/yabai-grid 5:-:0:-1:0:1
grid5 < shift - i : ~/.scripts/yabai-grid 5:-:0:1:0:-1
grid5 < j         : ~/.scripts/yabai-grid -:5:-1:0:0:0
grid5 < ctrl - j  : ~/.scripts/yabai-grid -:5:-1:0:1:0
grid5 < shift - j : ~/.scripts/yabai-grid -:5:1:0:-1:0
grid5 < k         : ~/.scripts/yabai-grid 5:-:0:1:0:0
grid5 < ctrl - k  : ~/.scripts/yabai-grid 5:-:0:0:0:1
grid5 < shift - k : ~/.scripts/yabai-grid 5:-:0:0:0:-1
grid5 < l         : ~/.scripts/yabai-grid -:5:1:0:0:0
grid5 < ctrl - l  : ~/.scripts/yabai-grid -:5:0:0:1:0
grid5 < shift - l : ~/.scripts/yabai-grid -:5:0:0:-1:0
# 6x6
grid6 < i         : ~/.scripts/yabai-grid 6:-:0:-1:0:0
grid6 < ctrl - i  : ~/.scripts/yabai-grid 6:-:0:-1:0:1
grid6 < shift - i : ~/.scripts/yabai-grid 6:-:0:1:0:-1
grid6 < j         : ~/.scripts/yabai-grid -:6:-1:0:0:0
grid6 < ctrl - j  : ~/.scripts/yabai-grid -:6:-1:0:1:0
grid6 < shift - j : ~/.scripts/yabai-grid -:6:1:0:-1:0
grid6 < k         : ~/.scripts/yabai-grid 6:-:0:1:0:0
grid6 < ctrl - k  : ~/.scripts/yabai-grid 6:-:0:0:0:1
grid6 < shift - k : ~/.scripts/yabai-grid 6:-:0:0:0:-1
grid6 < l         : ~/.scripts/yabai-grid -:6:1:0:0:0
grid6 < ctrl - l  : ~/.scripts/yabai-grid -:6:0:0:1:0
grid6 < shift - l : ~/.scripts/yabai-grid -:6:0:0:-1:0
# 8x8
grid8 < i         : ~/.scripts/yabai-grid 8:-:0:-1:0:0
grid8 < ctrl - i  : ~/.scripts/yabai-grid 8:-:0:-1:0:1
grid8 < shift - i : ~/.scripts/yabai-grid 8:-:0:1:0:-1
grid8 < j         : ~/.scripts/yabai-grid -:8:-1:0:0:0
grid8 < ctrl - j  : ~/.scripts/yabai-grid -:8:-1:0:1:0
grid8 < shift - j : ~/.scripts/yabai-grid -:8:1:0:-1:0
grid8 < k         : ~/.scripts/yabai-grid 8:-:0:1:0:0
grid8 < ctrl - k  : ~/.scripts/yabai-grid 8:-:0:0:0:1
grid8 < shift - k : ~/.scripts/yabai-grid 8:-:0:0:0:-1
grid8 < l         : ~/.scripts/yabai-grid -:8:1:0:0:0
grid8 < ctrl - l  : ~/.scripts/yabai-grid -:8:0:0:1:0
grid8 < shift - l : ~/.scripts/yabai-grid -:8:0:0:-1:0
